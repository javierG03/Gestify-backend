openapi: 3.0.3
info:
  title: Mi API
  version: 1.0.0
  description: Documentación de mi API con Swagger y DRF
paths:
  /api/cities/:
    get:
      operationId: city_list
      description: Catálogo de ciudades filtrable por departamento.
      tags:
      - Catálogos
      security:
      - tokenAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/City'
          description: ''
  /api/departments/:
    get:
      operationId: department_list
      description: Catálogo de departamentos disponibles.
      tags:
      - Catálogos
      security:
      - tokenAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Department'
          description: ''
  /api/events/:
    get:
      operationId: event_list
      description: CRUD de eventos con acciones adicionales.
      tags:
      - Eventos
      security:
      - tokenAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Event'
          description: ''
    post:
      operationId: event_create
      description: CRUD de eventos con acciones adicionales.
      tags:
      - Eventos
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Event'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Event'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Event'
        required: true
      security:
      - tokenAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'
          description: ''
  /api/events/{id}/:
    get:
      operationId: event_detail
      description: CRUD de eventos con acciones adicionales.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - Eventos
      security:
      - tokenAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'
          description: ''
    put:
      operationId: event_update
      description: CRUD de eventos con acciones adicionales.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - Eventos
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Event'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Event'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Event'
        required: true
      security:
      - tokenAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'
          description: ''
    patch:
      operationId: event_partial_update
      description: CRUD de eventos con acciones adicionales.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - Eventos
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedEvent'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedEvent'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedEvent'
      security:
      - tokenAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'
          description: ''
    delete:
      operationId: event_delete
      description: CRUD de eventos con acciones adicionales.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - Eventos
      security:
      - tokenAuth: []
      responses:
        '204':
          description: No response body
  /api/events/{id}/attendees/:
    get:
      operationId: event_attendees
      description: Lista los asistentes registrados a un evento.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - Eventos
      security:
      - tokenAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AttendeeTicket'
          description: ''
  /api/events/{id}/availability/:
    get:
      operationId: events_availability_retrieve
      description: CRUD de eventos con acciones adicionales.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - events
      security:
      - tokenAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'
          description: ''
  /api/events/{id}/buy/:
    post:
      operationId: buy_ticket
      description: Compra o reserva de tickets para un evento.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - Pagos
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BuyTicketRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/BuyTicketRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/BuyTicketRequest'
        required: true
      security:
      - tokenAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BuyTicketResponse'
          description: ''
  /api/events/{id}/cancel/:
    post:
      operationId: events_cancel_create
      description: CRUD de eventos con acciones adicionales.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - events
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Event'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Event'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Event'
        required: true
      security:
      - tokenAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'
          description: ''
  /api/events/{id}/ticket-types/:
    get:
      operationId: events_ticket_types_retrieve
      description: CRUD de eventos con acciones adicionales.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - events
      security:
      - tokenAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'
          description: ''
  /api/events/my-events/:
    get:
      operationId: my_events
      description: Eventos a los que el usuario autenticado está inscrito.
      tags:
      - Eventos
      security:
      - tokenAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MyEvent'
          description: ''
  /api/payments/payu/confirmation/:
    post:
      operationId: payments_payu_confirmation_create
      description: Endpoint para recibir confirmación de pago de PayU.
      tags:
      - Pagos - Webhooks
      security:
      - {}
      responses:
        '200':
          description: No response body
  /api/payments/payu/webhook/:
    post:
      operationId: payments_payu_webhook_create
      description: Endpoint para recibir notificaciones automáticas de PayU (webhook).
      tags:
      - Pagos - Webhooks
      security:
      - tokenAuth: []
      responses:
        '200':
          description: No response body
  /api/payments/ticket/{ticket_id}/pay/:
    post:
      operationId: payments_ticket_pay_create
      description: Inicia el proceso de pago con PayU para un ticket específico.
      parameters:
      - in: path
        name: ticket_id
        schema:
          type: integer
        required: true
      tags:
      - Pagos
      security:
      - tokenAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PayUDataResponse'
          description: ''
  /api/payments/user/history/:
    get:
      operationId: payments_user_history_list
      description: Endpoint para consultar el historial de pagos del usuario autenticado.
      tags:
      - payments
      security:
      - tokenAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PaymentTransaction'
          description: ''
  /api/ticket-types/:
    get:
      operationId: ticket_type_list
      description: CRUD de tipos de ticket reutilizables entre eventos.
      tags:
      - Tipos de tickets
      security:
      - tokenAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/TicketType'
          description: ''
    post:
      operationId: ticket_type_create
      description: CRUD de tipos de ticket reutilizables entre eventos.
      tags:
      - Tipos de tickets
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TicketType'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TicketType'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TicketType'
        required: true
      security:
      - tokenAuth: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TicketType'
          description: ''
  /api/ticket-types/{id}/:
    get:
      operationId: ticket_type_detail
      description: CRUD de tipos de ticket reutilizables entre eventos.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - Tipos de tickets
      security:
      - tokenAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TicketType'
          description: ''
    put:
      operationId: ticket_type_update
      description: CRUD de tipos de ticket reutilizables entre eventos.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - Tipos de tickets
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TicketType'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TicketType'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TicketType'
        required: true
      security:
      - tokenAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TicketType'
          description: ''
    patch:
      operationId: ticket_type_partial_update
      description: CRUD de tipos de ticket reutilizables entre eventos.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - Tipos de tickets
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedTicketType'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedTicketType'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedTicketType'
      security:
      - tokenAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TicketType'
          description: ''
    delete:
      operationId: ticket_type_delete
      description: CRUD de tipos de ticket reutilizables entre eventos.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - Tipos de tickets
      security:
      - tokenAuth: []
      responses:
        '204':
          description: No response body
  /api/tickets/{id}/:
    get:
      operationId: tickets_retrieve
      description: Devuelve el detalle de un ticket por su ID.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - tickets
      security:
      - tokenAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Ticket'
          description: ''
  /api/tickets/{id}/resend/:
    post:
      operationId: tickets_resend_create
      description: Permite reenviar por correo el ticket del usuario autenticado.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - Tickets
      security:
      - tokenAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'
          description: ''
  /api/tickets/{ticket_id}/access-log/:
    get:
      operationId: ticket_access_log
      description: Auditoría de accesos asociados a un ticket.
      parameters:
      - in: path
        name: ticket_id
        schema:
          type: integer
        required: true
      tags:
      - Tickets
      security:
      - tokenAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/TicketAccessLog'
          description: ''
  /api/tickets/my-tickets/:
    get:
      operationId: tickets_my_tickets_list
      description: Lista los tickets pertenecientes al usuario autenticado.
      tags:
      - Tickets
      security:
      - tokenAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Ticket'
          description: ''
  /api/tickets/validate/:
    post:
      operationId: validate_ticket
      description: Valida tickets por código único y registra el acceso.
      tags:
      - Tickets
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TicketValidationRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TicketValidationRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TicketValidationRequest'
        required: true
      security:
      - tokenAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TicketValidationSuccessResponse'
          description: ''
  /api/users/:
    get:
      operationId: users_list
      description: Lista todos los usuarios (solo admin).
      tags:
      - Usuarios
      security:
      - tokenAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/CustomUser'
          description: ''
  /api/users/{id}/:
    get:
      operationId: users_retrieve
      description: Permite ver, editar o eliminar un usuario (solo admin o el propio
        usuario).
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - Usuarios
      security:
      - tokenAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CustomUser'
          description: ''
    put:
      operationId: users_update
      description: Permite ver, editar o eliminar un usuario (solo admin o el propio
        usuario).
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - Usuarios
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CustomUser'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/CustomUser'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CustomUser'
        required: true
      security:
      - tokenAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CustomUser'
          description: ''
    patch:
      operationId: users_partial_update
      description: Permite ver, editar o eliminar un usuario (solo admin o el propio
        usuario).
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - Usuarios
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedCustomUser'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedCustomUser'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedCustomUser'
      security:
      - tokenAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CustomUser'
          description: ''
    delete:
      operationId: users_destroy
      description: Permite ver, editar o eliminar un usuario (solo admin o el propio
        usuario).
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - Usuarios
      security:
      - tokenAuth: []
      responses:
        '204':
          description: No response body
  /api/users/{id}/assign-role/:
    post:
      operationId: users_assign_role_create
      description: Asigna un rol a un usuario (solo admin).
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - Usuarios
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AssignRole'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/AssignRole'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AssignRole'
        required: true
      security:
      - tokenAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AssignRole'
          description: ''
  /api/users/{id}/remove-role/:
    delete:
      operationId: users_remove_role_destroy
      description: Elimina un rol de un usuario (solo admin).
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - Usuarios
      security:
      - tokenAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RemoveRole'
          description: ''
  /api/users/change-password/:
    post:
      operationId: users_change_password_create
      description: Cambia la contraseña del usuario autenticado.
      tags:
      - Autenticación
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChangePassword'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ChangePassword'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ChangePassword'
        required: true
      security:
      - tokenAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChangePassword'
          description: ''
  /api/users/login/:
    post:
      operationId: users_login_create
      description: Inicia sesión un usuario registrado.
      tags:
      - Autenticación
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserLogin'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/UserLogin'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UserLogin'
        required: true
      security:
      - tokenAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserLogin'
          description: ''
  /api/users/password-reset/:
    post:
      operationId: users_password_reset_create
      tags:
      - Autenticación
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Email'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Email'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Email'
        required: true
      security:
      - tokenAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'
          description: ''
  /api/users/password-reset-confirm/:
    post:
      operationId: users_password_reset_confirm_create
      tags:
      - Autenticación
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PasswordResetConfirm'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PasswordResetConfirm'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PasswordResetConfirm'
        required: true
      security:
      - tokenAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'
          description: ''
  /api/users/profile/:
    get:
      operationId: users_profile_retrieve
      description: Permite al usuario autenticado editar su perfil.
      tags:
      - users
      security:
      - tokenAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CustomUser'
          description: ''
    put:
      operationId: users_profile_update
      description: Permite al usuario autenticado editar su perfil.
      tags:
      - users
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CustomUser'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/CustomUser'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CustomUser'
        required: true
      security:
      - tokenAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CustomUser'
          description: ''
    patch:
      operationId: users_profile_partial_update
      description: Permite al usuario autenticado editar su perfil.
      tags:
      - users
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedCustomUser'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedCustomUser'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedCustomUser'
      security:
      - tokenAuth: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CustomUser'
          description: ''
  /api/users/register/:
    post:
      operationId: users_register_create
      description: Registra un nuevo usuario.
      tags:
      - Autenticación
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserRegister'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/UserRegister'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UserRegister'
        required: true
      security:
      - tokenAuth: []
      - {}
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserRegister'
          description: ''
  /api/users/verify-email/:
    get:
      operationId: verify_email
      description: Verificación de correo electrónico
      tags:
      - Autenticación
      security:
      - tokenAuth: []
      - {}
      responses:
        '200':
          description: No response body
components:
  schemas:
    AssignRole:
      type: object
      properties:
        role:
          type: string
          writeOnly: true
      required:
      - role
    AttendeeTicket:
      type: object
      description: Serializador para un ticket en la lista de asistentes (EventInscritosAPIView).
      properties:
        ticket_id:
          type: integer
        user:
          $ref: '#/components/schemas/CustomUser'
        ticket_type:
          type: string
        amount:
          type: integer
        status:
          type: string
        unique_code:
          type: string
          format: uuid
        date_of_purchase:
          type: string
          format: date-time
        price_paid:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
      required:
      - amount
      - date_of_purchase
      - price_paid
      - status
      - ticket_id
      - ticket_type
      - unique_code
      - user
    BuyTicketRequest:
      type: object
      description: Serializador para el *request* de BuyTicketAPIView.
      properties:
        config_type_id:
          type: integer
          description: ID de la configuración (TicketTypeEvent) a comprar.
        amount:
          type: integer
          default: 1
          description: Cantidad de boletos a comprar.
      required:
      - config_type_id
    BuyTicketResponse:
      type: object
      description: Serializador para la *respuesta* de BuyTicketAPIView.
      properties:
        message:
          type: string
        ticket_id:
          type: integer
        config_type_id:
          type: integer
        amount:
          type: integer
        total_a_pagar:
          type: string
        payment:
          $ref: '#/components/schemas/PayUPaymentData'
      required:
      - amount
      - config_type_id
      - message
      - payment
      - ticket_id
      - total_a_pagar
    ChangePassword:
      type: object
      properties:
        old_password:
          type: string
          writeOnly: true
        new_password:
          type: string
          writeOnly: true
      required:
      - new_password
      - old_password
    City:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          description: Nombre de la ciudad
          maxLength: 100
        department:
          allOf:
          - $ref: '#/components/schemas/Department'
          readOnly: true
      required:
      - department
      - id
      - name
    CustomUser:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        department_name:
          type: string
          nullable: true
          readOnly: true
        city_name:
          type: string
          nullable: true
          readOnly: true
        eventos_inscritos:
          type: array
          items:
            $ref: '#/components/schemas/SimpleEvent'
          readOnly: true
        document_type:
          type: string
          readOnly: true
        password:
          type: string
          writeOnly: true
          maxLength: 128
        last_login:
          type: string
          format: date-time
          nullable: true
        is_superuser:
          type: boolean
          title: Superuser status
          description: Designates that this user has all permissions without explicitly
            assigning them.
        is_staff:
          type: boolean
          title: Staff status
          description: Designates whether the user can log into this admin site.
        is_active:
          type: boolean
          title: Active
          description: Designates whether this user should be treated as active. Unselect
            this instead of deleting accounts.
        date_joined:
          type: string
          format: date-time
        username:
          type: string
          maxLength: 150
        first_name:
          type: string
          description: Nombres
          maxLength: 150
        last_name:
          type: string
          description: Apellidos
          maxLength: 150
        email:
          type: string
          format: email
          maxLength: 254
        phone:
          type: string
          nullable: true
          description: Teléfono de contacto
          maxLength: 20
        birth_date:
          type: string
          format: date
          nullable: true
          description: Fecha de nacimiento
        document:
          type: string
          nullable: true
          description: Número de documento
          maxLength: 30
        country:
          type: string
          nullable: true
          description: País de residencia
          maxLength: 50
        created_at:
          type: string
          format: date-time
          readOnly: true
          description: Fecha de creación del usuario
        updated_at:
          type: string
          format: date-time
          readOnly: true
          description: Fecha de última actualización del usuario
        city_text:
          type: string
          nullable: true
          description: Ciudad libre (otros países)
          maxLength: 100
        department_text:
          type: string
          nullable: true
          description: Departamento/Región libre (otros países)
          maxLength: 100
        is_email_verified:
          type: boolean
          description: Indica si el email ha sido verificado
        department:
          type: integer
          nullable: true
          description: Departamento de residencia (solo Colombia)
        city:
          type: integer
          nullable: true
          description: Ciudad de residencia (solo Colombia)
        groups:
          type: array
          items:
            type: integer
          description: The groups this user belongs to. A user will get all permissions
            granted to each of their groups.
        user_permissions:
          type: array
          items:
            type: integer
          description: Specific permissions for this user.
      required:
      - city_name
      - created_at
      - department_name
      - document_type
      - email
      - eventos_inscritos
      - first_name
      - id
      - last_name
      - password
      - updated_at
      - username
    Department:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          description: Nombre del departamento
          maxLength: 100
      required:
      - id
      - name
    Email:
      type: object
      description: Serializador para un solo campo de email.
      properties:
        email:
          type: string
          format: email
      required:
      - email
    Event:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        event_name:
          type: string
          maxLength: 200
        description:
          type: string
        date:
          type: string
          format: date
          description: Fecha principal del evento (legacy, usar start_datetime y end_datetime)
        start_datetime:
          type: string
          format: date-time
          nullable: true
          description: Fecha y hora de inicio del evento
        end_datetime:
          type: string
          format: date-time
          nullable: true
          description: Fecha y hora de finalización del evento
        country:
          type: string
          description: País donde se realiza el evento
          maxLength: 50
        location:
          type: integer
          nullable: true
        city_text:
          type: string
          nullable: true
        department_text:
          type: string
          nullable: true
        status:
          allOf:
          - $ref: '#/components/schemas/EventCategoryEnum'
          description: |-
            Categoría del evento

            * `musica` - Música
            * `deporte` - Deporte
            * `educacion` - Educación
            * `tecnologia` - Tecnología
            * `arte` - Arte
            * `otros` - Otros
        category:
          allOf:
          - $ref: '#/components/schemas/EventCategoryEnum'
          description: |-
            Categoría del evento

            * `musica` - Música
            * `deporte` - Deporte
            * `educacion` - Educación
            * `tecnologia` - Tecnología
            * `arte` - Arte
            * `otros` - Otros
        image:
          type: string
          format: uri
          nullable: true
          description: URL de la imagen del evento (almacenada en Supabase)
          maxLength: 200
        image_file:
          type: string
          format: uri
          writeOnly: true
        organizer:
          type: string
          nullable: true
          description: Nombre del organizador
          maxLength: 200
        min_age:
          type: integer
          maximum: 2147483647
          minimum: 0
          nullable: true
          description: Edad mínima requerida para asistir al evento. Dejar vacío si
            no hay restricción.
        max_capacity:
          type: integer
          nullable: true
        sales_open_datetime:
          type: string
          format: date-time
          nullable: true
        tickets:
          type: array
          items:
            $ref: '#/components/schemas/Ticket'
          readOnly: true
        types_of_tickets_available:
          type: array
          items:
            type: object
            additionalProperties: {}
          readOnly: true
        maximun_capacity_remaining:
          type: integer
          readOnly: true
        ticket_type:
          type: array
          items:
            type: object
            additionalProperties: {}
          readOnly: true
      required:
      - date
      - description
      - event_name
      - id
      - maximun_capacity_remaining
      - ticket_type
      - tickets
      - types_of_tickets_available
    EventCategoryEnum:
      enum:
      - musica
      - deporte
      - educacion
      - tecnologia
      - arte
      - otros
      type: string
      description: |-
        * `musica` - Música
        * `deporte` - Deporte
        * `educacion` - Educación
        * `tecnologia` - Tecnología
        * `arte` - Arte
        * `otros` - Otros
    Message:
      type: object
      description: Serializador genérico para un mensaje de respuesta.
      properties:
        message:
          type: string
      required:
      - message
    MyEvent:
      type: object
      description: Serializador para un evento en la lista de 'mis eventos' (MyEventsAPIView).
      properties:
        event:
          type: string
        event_id:
          type: integer
        date:
          type: string
          format: date
        location:
          type: string
          nullable: true
        country:
          type: string
        city_text:
          type: string
        department_text:
          type: string
        status:
          type: string
        tickets:
          type: array
          items:
            $ref: '#/components/schemas/MyTicketDetail'
      required:
      - city_text
      - country
      - date
      - department_text
      - event
      - event_id
      - location
      - status
      - tickets
    MyTicketDetail:
      type: object
      description: Serializador para un ticket en la lista de 'mis eventos' (MyEventsAPIView).
      properties:
        ticket_id:
          type: integer
        type:
          type: string
        amount:
          type: integer
        status:
          type: string
        unique_code:
          type: string
          format: uuid
        qr_base64:
          type: string
          nullable: true
        date_of_purchase:
          type: string
          format: date-time
        price_paid:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
      required:
      - amount
      - date_of_purchase
      - price_paid
      - qr_base64
      - status
      - ticket_id
      - type
      - unique_code
    PasswordResetConfirm:
      type: object
      properties:
        token:
          type: string
        password:
          type: string
          writeOnly: true
        password_confirm:
          type: string
          writeOnly: true
      required:
      - password
      - password_confirm
      - token
    PatchedCustomUser:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        department_name:
          type: string
          nullable: true
          readOnly: true
        city_name:
          type: string
          nullable: true
          readOnly: true
        eventos_inscritos:
          type: array
          items:
            $ref: '#/components/schemas/SimpleEvent'
          readOnly: true
        document_type:
          type: string
          readOnly: true
        password:
          type: string
          writeOnly: true
          maxLength: 128
        last_login:
          type: string
          format: date-time
          nullable: true
        is_superuser:
          type: boolean
          title: Superuser status
          description: Designates that this user has all permissions without explicitly
            assigning them.
        is_staff:
          type: boolean
          title: Staff status
          description: Designates whether the user can log into this admin site.
        is_active:
          type: boolean
          title: Active
          description: Designates whether this user should be treated as active. Unselect
            this instead of deleting accounts.
        date_joined:
          type: string
          format: date-time
        username:
          type: string
          maxLength: 150
        first_name:
          type: string
          description: Nombres
          maxLength: 150
        last_name:
          type: string
          description: Apellidos
          maxLength: 150
        email:
          type: string
          format: email
          maxLength: 254
        phone:
          type: string
          nullable: true
          description: Teléfono de contacto
          maxLength: 20
        birth_date:
          type: string
          format: date
          nullable: true
          description: Fecha de nacimiento
        document:
          type: string
          nullable: true
          description: Número de documento
          maxLength: 30
        country:
          type: string
          nullable: true
          description: País de residencia
          maxLength: 50
        created_at:
          type: string
          format: date-time
          readOnly: true
          description: Fecha de creación del usuario
        updated_at:
          type: string
          format: date-time
          readOnly: true
          description: Fecha de última actualización del usuario
        city_text:
          type: string
          nullable: true
          description: Ciudad libre (otros países)
          maxLength: 100
        department_text:
          type: string
          nullable: true
          description: Departamento/Región libre (otros países)
          maxLength: 100
        is_email_verified:
          type: boolean
          description: Indica si el email ha sido verificado
        department:
          type: integer
          nullable: true
          description: Departamento de residencia (solo Colombia)
        city:
          type: integer
          nullable: true
          description: Ciudad de residencia (solo Colombia)
        groups:
          type: array
          items:
            type: integer
          description: The groups this user belongs to. A user will get all permissions
            granted to each of their groups.
        user_permissions:
          type: array
          items:
            type: integer
          description: Specific permissions for this user.
    PatchedEvent:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        event_name:
          type: string
          maxLength: 200
        description:
          type: string
        date:
          type: string
          format: date
          description: Fecha principal del evento (legacy, usar start_datetime y end_datetime)
        start_datetime:
          type: string
          format: date-time
          nullable: true
          description: Fecha y hora de inicio del evento
        end_datetime:
          type: string
          format: date-time
          nullable: true
          description: Fecha y hora de finalización del evento
        country:
          type: string
          description: País donde se realiza el evento
          maxLength: 50
        location:
          type: integer
          nullable: true
        city_text:
          type: string
          nullable: true
        department_text:
          type: string
          nullable: true
        status:
          allOf:
          - $ref: '#/components/schemas/EventCategoryEnum'
          description: |-
            Categoría del evento

            * `musica` - Música
            * `deporte` - Deporte
            * `educacion` - Educación
            * `tecnologia` - Tecnología
            * `arte` - Arte
            * `otros` - Otros
        category:
          allOf:
          - $ref: '#/components/schemas/EventCategoryEnum'
          description: |-
            Categoría del evento

            * `musica` - Música
            * `deporte` - Deporte
            * `educacion` - Educación
            * `tecnologia` - Tecnología
            * `arte` - Arte
            * `otros` - Otros
        image:
          type: string
          format: uri
          nullable: true
          description: URL de la imagen del evento (almacenada en Supabase)
          maxLength: 200
        image_file:
          type: string
          format: uri
          writeOnly: true
        organizer:
          type: string
          nullable: true
          description: Nombre del organizador
          maxLength: 200
        min_age:
          type: integer
          maximum: 2147483647
          minimum: 0
          nullable: true
          description: Edad mínima requerida para asistir al evento. Dejar vacío si
            no hay restricción.
        max_capacity:
          type: integer
          nullable: true
        sales_open_datetime:
          type: string
          format: date-time
          nullable: true
        tickets:
          type: array
          items:
            $ref: '#/components/schemas/Ticket'
          readOnly: true
        types_of_tickets_available:
          type: array
          items:
            type: object
            additionalProperties: {}
          readOnly: true
        maximun_capacity_remaining:
          type: integer
          readOnly: true
        ticket_type:
          type: array
          items:
            type: object
            additionalProperties: {}
          readOnly: true
    PatchedTicketType:
      type: object
      description: Tipo de ticket reutilizable entre eventos.
      properties:
        id:
          type: integer
          readOnly: true
        ticket_name:
          type: string
          maxLength: 50
        description:
          type: string
          description: Benefits or details of ticket type.
    PayUDataResponse:
      type: object
      description: Datos que se devuelven al front-end para iniciar el pago en PayU.
      properties:
        sandbox:
          type: boolean
        merchantId:
          type: string
        accountId:
          type: string
        description:
          type: string
        referenceCode:
          type: string
        amount:
          type: string
        currency:
          type: string
        signature:
          type: string
        buyerEmail:
          type: string
          format: email
        confirmationUrl:
          type: string
          format: uri
        responseUrl:
          type: string
          format: uri
      required:
      - accountId
      - amount
      - buyerEmail
      - confirmationUrl
      - currency
      - description
      - merchantId
      - referenceCode
      - responseUrl
      - sandbox
      - signature
    PayUPaymentData:
      type: object
      description: Serializador para la data de PayU (BuyTicketAPIView response).
      properties:
        sandbox:
          type: boolean
        merchantId:
          type: string
        accountId:
          type: string
        description:
          type: string
        referenceCode:
          type: string
        amount:
          type: string
        currency:
          type: string
        signature:
          type: string
        buyerEmail:
          type: string
          format: email
        confirmationUrl:
          type: string
          format: uri
        responseUrl:
          type: string
          format: uri
      required:
      - accountId
      - amount
      - buyerEmail
      - confirmationUrl
      - currency
      - description
      - merchantId
      - referenceCode
      - responseUrl
      - sandbox
      - signature
    PaymentTransaction:
      type: object
      description: Serializador para el modelo PaymentTransaction.
      properties:
        id:
          type: integer
          readOnly: true
        reference_code:
          type: string
          maxLength: 64
        transaction_id:
          type: string
          nullable: true
          maxLength: 64
        status:
          type: string
          maxLength: 32
        amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        currency:
          type: string
          maxLength: 8
        buyer_email:
          type: string
          format: email
          maxLength: 254
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        gateway:
          type: string
          maxLength: 32
      required:
      - amount
      - buyer_email
      - created_at
      - id
      - reference_code
      - status
      - updated_at
    RemoveRole:
      type: object
      properties:
        role:
          type: string
      required:
      - role
    SimpleEvent:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        event_name:
          type: string
          maxLength: 200
        date:
          type: string
          format: date
          description: Fecha principal del evento (legacy, usar start_datetime y end_datetime)
        status:
          allOf:
          - $ref: '#/components/schemas/EventCategoryEnum'
          description: |-
            Categoría del evento

            * `musica` - Música
            * `deporte` - Deporte
            * `educacion` - Educación
            * `tecnologia` - Tecnología
            * `arte` - Arte
            * `otros` - Otros
      required:
      - date
      - event_name
      - id
    Ticket:
      type: object
      description: Detalle de tickets vendidos o reservados.
      properties:
        id:
          type: integer
          readOnly: true
        user:
          allOf:
          - $ref: '#/components/schemas/UserSummary'
          readOnly: true
        event:
          type: string
          readOnly: true
        config_type:
          allOf:
          - $ref: '#/components/schemas/TicketTypeEvent'
          readOnly: true
        qr_base64:
          type: string
          nullable: true
          readOnly: true
        user_id:
          type: integer
          writeOnly: true
        amount:
          type: integer
          maximum: 2147483647
          minimum: 0
          description: Number of tickets purchased.
        date_of_purchase:
          type: string
          format: date-time
          readOnly: true
        status:
          $ref: '#/components/schemas/TicketStatusEnum'
        unique_code:
          type: string
          readOnly: true
      required:
      - config_type
      - date_of_purchase
      - event
      - id
      - qr_base64
      - unique_code
      - user
    TicketAccessLog:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        ticket:
          type: integer
          readOnly: true
        accessed_by:
          allOf:
          - $ref: '#/components/schemas/UserSummary'
          readOnly: true
        access_time:
          type: string
          format: date-time
          readOnly: true
        ip_address:
          type: string
          readOnly: true
          nullable: true
        device_info:
          type: string
          readOnly: true
          nullable: true
      required:
      - access_time
      - accessed_by
      - device_info
      - id
      - ip_address
      - ticket
    TicketStatusEnum:
      enum:
      - comprada
      - usada
      - pendiente
      - cancelada
      type: string
      description: |-
        * `comprada` - Comprada
        * `usada` - Usada
        * `pendiente` - Pendiente por pagar
        * `cancelada` - Cancelada
    TicketType:
      type: object
      description: Tipo de ticket reutilizable entre eventos.
      properties:
        id:
          type: integer
          readOnly: true
        ticket_name:
          type: string
          maxLength: 50
        description:
          type: string
          description: Benefits or details of ticket type.
      required:
      - id
      - ticket_name
    TicketTypeEvent:
      type: object
      description: Configuración específica de un tipo de ticket para un evento.
      properties:
        id:
          type: integer
          readOnly: true
        ticket_type:
          allOf:
          - $ref: '#/components/schemas/TicketType'
          readOnly: true
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Specfic price for this event.
        maximun_capacity:
          type: integer
          maximum: 2147483647
          minimum: 0
          description: Maximun capacity for this event.
        capacity_sold:
          type: integer
          readOnly: true
        remaining_capacity:
          type: integer
          readOnly: true
      required:
      - capacity_sold
      - id
      - maximun_capacity
      - price
      - remaining_capacity
      - ticket_type
    TicketValidationRequest:
      type: object
      properties:
        unique_code:
          type: string
      required:
      - unique_code
    TicketValidationSuccessResponse:
      type: object
      properties:
        valid:
          type: boolean
        message:
          type: string
        ticket_id:
          type: integer
        event:
          type: string
        event_id:
          type: integer
        user:
          type: string
        user_id:
          type: integer
        ticket_type:
          type: string
        amount:
          type: integer
        date_of_purchase:
          type: string
          format: date-time
        unique_code:
          type: string
          format: uuid
      required:
      - amount
      - date_of_purchase
      - event
      - event_id
      - message
      - ticket_id
      - ticket_type
      - unique_code
      - user
      - user_id
      - valid
    UserLogin:
      type: object
      properties:
        email:
          type: string
          format: email
        password:
          type: string
          writeOnly: true
      required:
      - email
      - password
    UserRegister:
      type: object
      properties:
        username:
          type: string
          maxLength: 150
        first_name:
          type: string
          description: Nombres
          maxLength: 150
        last_name:
          type: string
          description: Apellidos
          maxLength: 150
        email:
          type: string
          format: email
          maxLength: 254
        phone:
          type: string
          nullable: true
          description: Teléfono de contacto
          maxLength: 20
        birth_date:
          type: string
          format: date
          nullable: true
          description: Fecha de nacimiento
        document_type:
          type: integer
          nullable: true
          description: Tipo de documento
        document:
          type: string
          nullable: true
          description: Número de documento
          maxLength: 30
        country:
          type: string
          nullable: true
          description: País de residencia
          maxLength: 50
        department:
          type: integer
        city:
          type: integer
        city_text:
          type: string
        department_text:
          type: string
        password:
          type: string
          writeOnly: true
          maxLength: 128
        password_confirm:
          type: string
          writeOnly: true
      required:
      - email
      - first_name
      - last_name
      - password
      - password_confirm
      - username
    UserSummary:
      type: object
      description: Datos básicos del usuario asociado a un ticket.
      properties:
        id:
          type: integer
          readOnly: true
        first_name:
          type: string
          description: Nombres
          maxLength: 150
        last_name:
          type: string
          description: Apellidos
          maxLength: 150
        email:
          type: string
          format: email
          maxLength: 254
      required:
      - email
      - first_name
      - id
      - last_name
  securitySchemes:
    tokenAuth:
      type: apiKey
      in: header
      name: Authorization
      description: Token-based authentication with required prefix "Token"
